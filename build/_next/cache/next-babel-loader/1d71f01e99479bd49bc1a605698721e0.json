{"ast":null,"code":"import nextCookies from 'next-cookies';\nimport jsCookies from 'js-cookie';\nimport { destroyCookie } from 'nookies';\nvar SESSION_COOKIE = process.env.SESSION_COOKIE;\nexport var getAuth = function getAuth(ctx) {\n  var cookies = nextCookies(ctx);\n  var token = cookies[SESSION_COOKIE];\n  return {\n    isLoggedIn: !!token\n  };\n};\nexport var getCookie = function getCookie(ctx) {\n  return ctx && ctx.req && ctx.req.headers ? ctx.req.headers.cookie : undefined;\n};\nexport var forceClearSession = function forceClearSession(ctx) {\n  if (ctx) {\n    destroyCookie(ctx, SESSION_COOKIE);\n  } else {\n    jsCookies.remove(SESSION_COOKIE);\n  }\n};","map":{"version":3,"sources":["/home/lucas/dev/uerj/urban-map-site/src/utils/auth.js"],"names":["nextCookies","jsCookies","destroyCookie","SESSION_COOKIE","process","env","getAuth","ctx","cookies","token","isLoggedIn","getCookie","req","headers","cookie","undefined","forceClearSession","remove"],"mappings":"AAAA,OAAOA,WAAP,MAAwB,cAAxB;AACA,OAAOC,SAAP,MAAsB,WAAtB;AACA,SAASC,aAAT,QAA8B,SAA9B;IAEQC,c,GAAmBC,OAAO,CAACC,G,CAA3BF,c;AAER,OAAO,IAAMG,OAAO,GAAG,SAAVA,OAAU,CAACC,GAAD,EAAS;AAC9B,MAAMC,OAAO,GAAGR,WAAW,CAACO,GAAD,CAA3B;AACA,MAAME,KAAK,GAAGD,OAAO,CAACL,cAAD,CAArB;AAEA,SAAO;AACLO,IAAAA,UAAU,EAAE,CAAC,CAACD;AADT,GAAP;AAGD,CAPM;AASP,OAAO,IAAME,SAAS,GAAG,SAAZA,SAAY,CAACJ,GAAD;AAAA,SACvBA,GAAG,IAAIA,GAAG,CAACK,GAAX,IAAkBL,GAAG,CAACK,GAAJ,CAAQC,OAA1B,GAAoCN,GAAG,CAACK,GAAJ,CAAQC,OAAR,CAAgBC,MAApD,GAA6DC,SADtC;AAAA,CAAlB;AAIP,OAAO,IAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,CAACT,GAAD,EAAS;AACxC,MAAIA,GAAJ,EAAS;AACPL,IAAAA,aAAa,CAACK,GAAD,EAAMJ,cAAN,CAAb;AACD,GAFD,MAEO;AACLF,IAAAA,SAAS,CAACgB,MAAV,CAAiBd,cAAjB;AACD;AACF,CANM","sourcesContent":["import nextCookies from 'next-cookies';\nimport jsCookies from 'js-cookie';\nimport { destroyCookie } from 'nookies';\n\nconst { SESSION_COOKIE } = process.env;\n\nexport const getAuth = (ctx) => {\n  const cookies = nextCookies(ctx);\n  const token = cookies[SESSION_COOKIE];\n\n  return {\n    isLoggedIn: !!token,\n  };\n};\n\nexport const getCookie = (ctx) => (\n  ctx && ctx.req && ctx.req.headers ? ctx.req.headers.cookie : undefined\n);\n\nexport const forceClearSession = (ctx) => {\n  if (ctx) {\n    destroyCookie(ctx, SESSION_COOKIE);\n  } else {\n    jsCookies.remove(SESSION_COOKIE);\n  }\n};\n"]},"metadata":{},"sourceType":"module"}