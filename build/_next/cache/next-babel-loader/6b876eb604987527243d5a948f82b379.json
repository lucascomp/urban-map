{"ast":null,"code":"import nextCookies from 'next-cookies';\nimport jsCookies from 'js-cookie';\nimport { destroyCookie } from 'nookies';\nconst {\n  SESSION_COOKIE\n} = process.env;\nexport const getAuth = ctx => {\n  const cookies = nextCookies(ctx);\n  const token = cookies[SESSION_COOKIE];\n  return {\n    isLoggedIn: !!token\n  };\n};\nexport const getCookie = ctx => ctx && ctx.req && ctx.req.headers ? ctx.req.headers.cookie : undefined;\nexport const forceClearSession = ctx => {\n  if (ctx) {\n    destroyCookie(ctx, SESSION_COOKIE);\n  } else {\n    jsCookies.remove(SESSION_COOKIE);\n  }\n};","map":{"version":3,"sources":["/home/lucas/dev/uerj/urban-map-site/src/utils/auth.js"],"names":["nextCookies","jsCookies","destroyCookie","SESSION_COOKIE","process","env","getAuth","ctx","cookies","token","isLoggedIn","getCookie","req","headers","cookie","undefined","forceClearSession","remove"],"mappings":"AAAA,OAAOA,WAAP,MAAwB,cAAxB;AACA,OAAOC,SAAP,MAAsB,WAAtB;AACA,SAASC,aAAT,QAA8B,SAA9B;AAEA,MAAM;AAAEC,EAAAA;AAAF,IAAqBC,OAAO,CAACC,GAAnC;AAEA,OAAO,MAAMC,OAAO,GAAIC,GAAD,IAAS;AAC9B,QAAMC,OAAO,GAAGR,WAAW,CAACO,GAAD,CAA3B;AACA,QAAME,KAAK,GAAGD,OAAO,CAACL,cAAD,CAArB;AAEA,SAAO;AACLO,IAAAA,UAAU,EAAE,CAAC,CAACD;AADT,GAAP;AAGD,CAPM;AASP,OAAO,MAAME,SAAS,GAAIJ,GAAD,IACvBA,GAAG,IAAIA,GAAG,CAACK,GAAX,IAAkBL,GAAG,CAACK,GAAJ,CAAQC,OAA1B,GAAoCN,GAAG,CAACK,GAAJ,CAAQC,OAAR,CAAgBC,MAApD,GAA6DC,SADxD;AAIP,OAAO,MAAMC,iBAAiB,GAAIT,GAAD,IAAS;AACxC,MAAIA,GAAJ,EAAS;AACPL,IAAAA,aAAa,CAACK,GAAD,EAAMJ,cAAN,CAAb;AACD,GAFD,MAEO;AACLF,IAAAA,SAAS,CAACgB,MAAV,CAAiBd,cAAjB;AACD;AACF,CANM","sourcesContent":["import nextCookies from 'next-cookies';\nimport jsCookies from 'js-cookie';\nimport { destroyCookie } from 'nookies';\n\nconst { SESSION_COOKIE } = process.env;\n\nexport const getAuth = (ctx) => {\n  const cookies = nextCookies(ctx);\n  const token = cookies[SESSION_COOKIE];\n\n  return {\n    isLoggedIn: !!token,\n  };\n};\n\nexport const getCookie = (ctx) => (\n  ctx && ctx.req && ctx.req.headers ? ctx.req.headers.cookie : undefined\n);\n\nexport const forceClearSession = (ctx) => {\n  if (ctx) {\n    destroyCookie(ctx, SESSION_COOKIE);\n  } else {\n    jsCookies.remove(SESSION_COOKIE);\n  }\n};\n"]},"metadata":{},"sourceType":"module"}