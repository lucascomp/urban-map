{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport React from 'react';\nimport { getAuth } from '../../utils/auth';\nimport redirect from '../../utils/router';\nexport default function asPrivate() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      _ref$pathToRedirect = _ref.pathToRedirect,\n      pathToRedirect = _ref$pathToRedirect === void 0 ? '/login' : _ref$pathToRedirect;\n\n  return function (Component) {\n    function PrivateComponent(props) {\n      // eslint-disable-next-line react/jsx-props-no-spreading\n      return /*#__PURE__*/React.createElement(Component, props);\n    }\n\n    PrivateComponent.getInitialProps = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(ctx) {\n        var _getAuth, isLoggedIn;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _getAuth = getAuth(ctx), isLoggedIn = _getAuth.isLoggedIn;\n\n                if (isLoggedIn) {\n                  _context.next = 4;\n                  break;\n                }\n\n                redirect(pathToRedirect, ctx);\n                return _context.abrupt(\"return\", {});\n\n              case 4:\n                return _context.abrupt(\"return\", Component.getInitialProps ? Component.getInitialProps(ctx) : {});\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    return PrivateComponent;\n  };\n}","map":{"version":3,"sources":["/home/lucas/dev/uerj/urban-map-site/src/components/Auth/asPrivate.jsx"],"names":["React","getAuth","redirect","asPrivate","pathToRedirect","Component","PrivateComponent","props","getInitialProps","ctx","isLoggedIn"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,kBAAxB;AACA,OAAOC,QAAP,MAAqB,oBAArB;AAEA,eAAe,SAASC,SAAT,GAAuD;AAAA,iFAAJ,EAAI;AAAA,iCAAlCC,cAAkC;AAAA,MAAlCA,cAAkC,oCAAjB,QAAiB;;AACpE,SAAO,UAACC,SAAD,EAAe;AACpB,aAASC,gBAAT,CAA0BC,KAA1B,EAAiC;AAC/B;AACA,0BAAO,oBAAC,SAAD,EAAeA,KAAf,CAAP;AACD;;AAEDD,IAAAA,gBAAgB,CAACE,eAAjB;AAAA,2EAAmC,iBAAOC,GAAP;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,2BACVR,OAAO,CAACQ,GAAD,CADG,EACzBC,UADyB,YACzBA,UADyB;;AAAA,oBAG5BA,UAH4B;AAAA;AAAA;AAAA;;AAI/BR,gBAAAA,QAAQ,CAACE,cAAD,EAAiBK,GAAjB,CAAR;AAJ+B,iDAMxB,EANwB;;AAAA;AAAA,iDAS1BJ,SAAS,CAACG,eAAV,GAA4BH,SAAS,CAACG,eAAV,CAA0BC,GAA1B,CAA5B,GAA6D,EATnC;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAnC;;AAAA;AAAA;AAAA;AAAA;;AAYA,WAAOH,gBAAP;AACD,GAnBD;AAoBD","sourcesContent":["import React from 'react';\nimport { getAuth } from '../../utils/auth';\nimport redirect from '../../utils/router';\n\nexport default function asPrivate({ pathToRedirect = '/login' } = {}) {\n  return (Component) => {\n    function PrivateComponent(props) {\n      // eslint-disable-next-line react/jsx-props-no-spreading\n      return <Component {...props} />;\n    }\n\n    PrivateComponent.getInitialProps = async (ctx) => {\n      const { isLoggedIn } = getAuth(ctx);\n\n      if (!isLoggedIn) {\n        redirect(pathToRedirect, ctx);\n\n        return {};\n      }\n\n      return Component.getInitialProps ? Component.getInitialProps(ctx) : {};\n    };\n\n    return PrivateComponent;\n  };\n}\n"]},"metadata":{},"sourceType":"module"}